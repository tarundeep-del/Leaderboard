<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Leaderboard</title>

<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #0e2a57;
    color: #fff;
  }

  .container {
    display: flex;
    height: 100vh;
  }

  .sidebar {
    width: 160px;
    background: linear-gradient(180deg, #ff7a18, #0e2a57);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .sidebar .text {
    writing-mode: vertical-rl;
    transform: rotate(180deg);
    font-size: 32px;
    font-weight: bold;
    letter-spacing: 2px;
  }

  .board {
    flex: 1;
    padding: 40px;
  }

  .row {
    margin-bottom: 18px;
    transition: transform 0.6s ease;
  }

  .team {
    display: flex;
    align-items: center;
    gap: 18px;
    padding: 14px 22px;
    border-radius: 40px;
    font-size: 18px;
    font-weight: bold;
    box-shadow: 0 4px 10px rgba(0,0,0,0.35);
  }

  .logo {
    width: 46px;
    height: 46px;
    border-radius: 50%;
    background: #fff;
    overflow: hidden;
    flex-shrink: 0;
  }

  .logo img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .name {
    flex: 1;
  }

  .lives {
    font-size: 16px;
    white-space: nowrap;
  }
</style>
</head>

<body>

<div class="container">
  <div class="sidebar">
    <div class="text">LEADERBOARD</div>
  </div>

  <div class="board" id="leaderboard"></div>
</div>

<script>
  const SHEET_ID = "YOUR_SHEET_ID";
  const SHEET_NAME = "Sheet1";
  const REFRESH_INTERVAL = 15000; // 15 seconds

  const URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?sheet=${SHEET_NAME}`;

  let currentData = [];

  async function fetchData() {
    const res = await fetch(URL);
    const text = await res.text();
    const json = JSON.parse(text.substring(47).slice(0, -2));

    const rows = json.table.rows;

    return rows.map(r => ({
      name: r.c[0]?.v || "",
      lives: r.c[1]?.v || 0,
      color: r.c[2]?.v || "#888",
      logo: r.c[3]?.v || ""
    }));
  }

  function render(data) {
    const board = document.getElementById("leaderboard");

    data.forEach((team, index) => {
      let row = document.getElementById(team.name);

      if (!row) {
        row = document.createElement("div");
        row.className = "row";
        row.id = team.name;

        row.innerHTML = `
          <div class="team">
            <div class="logo"><img src="${team.logo}"></div>
            <div class="name"></div>
            <div class="lives"></div>
          </div>
        `;

        board.appendChild(row);
      }

      row.style.order = index;

      const teamDiv = row.querySelector(".team");
      teamDiv.style.background = team.color;
      row.querySelector(".name").textContent = team.name;
      row.querySelector(".lives").textContent = team.lives + " LIVES IMPACTED";
    });
  }

  async function updateLeaderboard() {
    const data = await fetchData();
    data.sort((a, b) => b.lives - a.lives);
    currentData = data;
    render(currentData);
  }

  // Initial load
  updateLeaderboard();

  // Live refresh (no reload)
  setInterval(updateLeaderboard, REFRESH_INTERVAL);
</script>

</body>
</html>
